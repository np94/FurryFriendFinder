(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(21),c=n.n(r),i=n(3),s=n(1),o=n(2),u=n(5),m=n(4),h=n(23),p=n.n(h),d=p.a.create({baseURL:"https://fffinder.herokuapp.com",withCredentials:!0});function f(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var g=function(e){return d.post("/api/auth/signup",e).then((function(e){return e.data})).catch(f)},E=function(e){return d.post("/api/auth/signin",e).then((function(e){return e.data})).catch(f)},v=function(){return d.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(f)},b=function(){return d.get("/api/auth/logout").then((function(e){return e.data})).catch(f)},y=function(){return d.get("/api/announce").then((function(e){return e.data})).catch(f)},C=function(e){return d.get("/api/announce/".concat(e)).then((function(e){return e.data})).catch(f)},j=function(e){return d.post("/api/announce",e).then((function(e){return e.data})).catch(f)},O=function(e,t){return d.patch("/api/announce/".concat(e),t).then((function(e){return e.data})).catch(f)},S=function(e){return d.patch("/api/users/me",e).then((function(e){return e.data})).catch(f)},N=function(){return d.get("/api/users/me/announce").then((function(e){return e.data})).catch(f)},w=function(e){return d.delete("/api/announce/".concat(e)).then((function(e){return e.data})).catch(f)},x=function(){return d.get("/api/users/me").then((function(e){return e.data})).catch(f)},k=l.a.createContext(),A=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return l.a.createElement(k.Provider,{value:e},this.props.children)}}]),n}(a.Component),F=n(6),I=function(e){return function(t){return l.a.createElement(k.Consumer,null,(function(n){return l.a.createElement(e,Object.assign({},t,{context:n}))}))}},_=(n(75),I((function(e){var t=e.context;return l.a.createElement("nav",{className:"NavMain",style:{width:"100vw",height:"60px",backgroundColor:"#386665"}},l.a.createElement(i.c,{exact:!0,to:"/"},l.a.createElement("h3",{className:"logo"},"Furry Friend Finder ",l.a.createElement("span",null,"\ud83d\udc3e")," ")),l.a.createElement("ul",{className:"nav-list"},t.isLoggedIn&&l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(i.c,{to:"/profile"},t.user&&t.user.username)),l.a.createElement("li",null,l.a.createElement("p",{onClick:function(){b().then((function(){t.removeUser()})).catch((function(e){console.log(e)}))}},"Logout"))),!t.isLoggedIn&&l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(i.c,{to:"/signin"},"Log in")),l.a.createElement("li",null,l.a.createElement(i.c,{to:"/signup"},"Sign Up")))))}))),L=n(16),R=Object(L.c)({accessToken:"pk.eyJ1IjoiaW50YW5wIiwiYSI6ImNranNvaXJmcTgxaTUyeWxnaGVpMHM1NHAifQ.oRrO6PATUG1aGeHmE8_n7Q"}),M=new Image(20,30);M.src="/media/paw-print.png";var T=new Image(20,30);T.src="/media/wanted.png";var D=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={lng:2.349014,lat:48.864716,zoom:12},e.handleClick=function(t){e.props.handleSelectAnnounce(t)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var n=t.coords.latitude,a=t.coords.longitude;e.setState({lat:n,lng:a})}),(function(){console.log("An error occured geolocating user")})):console.log("Geolocation not supported")}},{key:"render",value:function(){var e=this,t=this.props.announces.filter((function(e){return"Missing"===e.status[0]})),n=this.props.announces.filter((function(e){return"Found"===e.status[0]})),a=l.a.createElement(L.b,{type:"symbol",id:"missing",images:["missing-icon",M],layout:{"icon-image":"missing-icon"}},t.map((function(t,n){return l.a.createElement(L.a,{key:n,onClick:function(n){return e.handleClick(t)},coordinates:t.location.coordinates})}))),r=l.a.createElement(L.b,{type:"symbol",id:"found",images:["found-icon",T],layout:{"icon-image":"found-icon"}},n.map((function(t,n){return l.a.createElement(L.a,{key:n,onClick:function(n){return e.handleClick(t)},coordinates:t.location.coordinates})})));return l.a.createElement(R,{style:"mapbox://styles/mapbox/light-v10",zoom:[12],containerStyle:{top:0,left:0,bottom:0,right:0,position:"absolute"},center:[this.state.lng,this.state.lat]},a,r)}}]),n}(l.a.PureComponent),P=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={selectedItem:null,announces:[]},e.onSelectAnnounce=function(t){e.setState({selectedAnnounce:t})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;y().then((function(t){e.setState({announces:t})}))}},{key:"render",value:function(){this.context.user;return l.a.createElement(l.a.Fragment,null,l.a.createElement(D,{announces:this.state.announces,handleSelectAnnounce:this.onSelectAnnounce}),l.a.createElement("button",null,l.a.createElement(i.c,{to:"/profile"},"Missing")))}}]),n}(l.a.Component);P.contextType=k;var U=P,G=n(9),V=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={email:"",password:""},e.handleChange=function(t){var n=t.target.name,a=t.target.value;e.setState(Object(G.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),E(e.state).then((function(t){e.context.setUser(t),e.props.history.push("/profile")})).catch((function(e){console.log(e)}))},e}return Object(o.a)(n,[{key:"render",value:function(){return this.context.user?l.a.createElement(F.a,{to:"/"}):l.a.createElement("form",{onChange:this.handleChange,onSubmit:this.handleSubmit},l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{type:"email",id:"email",name:"email",onChange:this.handleChange,value:this.state.email,className:"input"}),l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",id:"password",name:"password",onChange:this.handleChange,value:this.state.password,className:"input"}),l.a.createElement("button",null,"Submit"))}}]),n}(a.Component);V.contextType=k;var H=Object(F.g)(V),J=function(e){return l.a.createElement(H,null)},W=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={username:"",email:"",password:"",phone_number:0},e.handleChange=function(t){var n=t.target.value,a=t.target.name;e.setState(Object(G.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault(),g(e.state).then((function(t){e.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(o.a)(n,[{key:"render",value:function(){return this.context.user?l.a.createElement(F.a,{to:"/profile"}):l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"username"},"Username"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.username,type:"username",id:"username",name:"username"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.email,type:"email",id:"email",name:"email"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.password,type:"password",id:"password",name:"password"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"phone_number"},"Phone number"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.phone_number,type:"phone_number",id:"phone_number",name:"phone_number"})),l.a.createElement("button",null,"Submit"))}}]),n}(a.Component);W.contextType=k;var Y=Object(F.g)(W),Q=function(e){return l.a.createElement(Y,null)},z=n(24),B=I((function(e){var t=e.component,n=e.context,a=Object(z.a)(e,["component","context"]);return n.isLoading?null:n.isLoggedIn?l.a.createElement(F.b,Object.assign({},a,{render:function(e){return l.a.createElement(t,e)}})):l.a.createElement(F.a,{to:"/signin"})})),X=n(25),q=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={userAnnounces:[],selectedAnnounce:null},e.deleteAnnounce=function(t){w(t).then((function(){var n=Object(X.a)(e.state.userAnnounces).filter((function(e){return e._id!==t}));e.setState({userAnnounces:n})}))},e.onAnnounceSelect=function(t){var n=e.state.userAnnounces.find((function(e){return e._id===t}));e.setState({selectedAnnounce:n})},e.onEditFormClose=function(){e.setState({selectedAnnounce:null})},e.handleAnnounceUpdate=function(t){var n=Object(X.a)(e.state.userAnnounces).map((function(e){return e._id===t._id?t:e}));e.setState({userAnnounces:n})},e.addAnnounce=function(t){e.setState({userAnnounces:Object(X.a)(e.state.userAnnounces)})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;N().then((function(t){e.setState({userAnnounces:t})}))}},{key:"render",value:function(){var e=this,t=this.context.user;this.state.userAnnounces;return t?l.a.createElement("section",{className:"Profile"},l.a.createElement("div",{className:"user-presentation"},l.a.createElement("h2",{className:"title"},t.username)),l.a.createElement("div",{className:"user-image"},l.a.createElement("img",{src:t.profileImg,alt:t.profileImg,style:{width:100,height:100}})),l.a.createElement("div",{className:"user-image"},l.a.createElement("h2",{className:"title"},t.username," ",t.email," ",t.phone_number),l.a.createElement("button",null,l.a.createElement(i.b,{className:"link",to:"/profile/settings"},"Edit profile")),l.a.createElement("button",null,l.a.createElement(i.c,{to:"/create"},"Report Missing"))),l.a.createElement("div",{className:"missing"},l.a.createElement("h3",null,"Your announcements"),this.state.userAnnounces&&this.state.userAnnounces.map((function(t){return l.a.createElement("div",{className:"missing_info",key:t._id},l.a.createElement("img",{style:{width:"100vw",height:""},src:t.image,alt:t.name}),l.a.createElement(i.b,{to:"/missing/".concat(t._id)},l.a.createElement("h2",null,t.title)),l.a.createElement("h3",null,t.name),l.a.createElement("h3",null,t.formattedAddress),l.a.createElement("h3",null,t.pet_type),l.a.createElement("h3",null,t.description),l.a.createElement(i.b,{to:"/profile/".concat(t._id,"/edit")},l.a.createElement("button",null,"Edit")),l.a.createElement("button",{onClick:function(){return e.deleteAnnounce(t._id)}},"Delete"))})))):null}}]),n}(a.Component);q.contextType=k;var K=I(q),Z=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={announces:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;y().then((function(t){e.setState({announces:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"missing"},l.a.createElement("h2",{className:"missing_title"},"Missing page"),this.state.announces&&this.state.announces.map((function(e){if("Missing"===e.status[0])return l.a.createElement("div",{className:"missing_info",key:e._id},l.a.createElement("img",{style:{width:"100vw",height:""},src:e.image,alt:e.name}),l.a.createElement(i.b,{to:"/missing/".concat(e._id)},l.a.createElement("h2",null,e.title)),l.a.createElement("h3",null,e.name),l.a.createElement("h3",null,e.location.coordinates),l.a.createElement("h3",null,e.pet_type),l.a.createElement("h3",null,e.description))})))}}]),n}(a.Component),$=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={announces:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;y().then((function(t){e.setState({announces:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"missing"},l.a.createElement("h2",null,"Found page"),this.state.announces.map((function(e){if("Found"===e.status[0])return l.a.createElement("div",{key:e._id},l.a.createElement("img",{style:{width:"100vw",height:"50vh"},src:e.image,alt:e.name}),l.a.createElement(i.b,{to:"/found/".concat(e._id)},l.a.createElement("h2",null,e.title)),l.a.createElement("h3",null,e.name),l.a.createElement("h3",null,e.location.coordinates),l.a.createElement("h3",null,e.pet_type),l.a.createElement("h3",null,e.description))})))}}]),n}(a.Component),ee=(n(101),function(){return l.a.createElement("nav",{className:"NavBottom",style:{width:"100vw",height:"60px",backgroundColor:"#386665"}},l.a.createElement("ul",{className:"nav-list"},l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(i.c,{to:"/missing"},"Missing"))),l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(i.c,{to:"/found"},"Found")))))}),te=(n(102),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={announce:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;C(t).then((function(t){e.setState({announce:t})}))}},{key:"render",value:function(){return this.state.announce?l.a.createElement("div",{className:"missing"},l.a.createElement("h2",null,"Missing details"),l.a.createElement("div",null,l.a.createElement("img",{src:this.state.announce.image,alt:"bob"}),l.a.createElement("h2",null,this.state.announce.title),l.a.createElement("h3",null,this.state.announce.name),l.a.createElement("h4",null,this.state.announce.formattedAddress),l.a.createElement("p",null,this.state.announce.email),l.a.createElement("p",null,this.state.announce.description),l.a.createElement("p",null,this.state.announce.pet_type),l.a.createElement("p",null,this.state.announce.comments))):l.a.createElement("div",null,"Looking for your announcement..")}}]),n}(a.Component)),ne=(n(103),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={announce:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;C(t).then((function(t){console.log(t),e.setState({announce:t})}))}},{key:"render",value:function(){return this.state.announce?l.a.createElement("div",{className:"missing"},l.a.createElement("h2",null,"Found details"),l.a.createElement("div",null,l.a.createElement("img",{src:this.state.announce.image,alt:"bob"}),l.a.createElement("h2",null,this.state.announce.title),l.a.createElement("h3",null,this.state.announce.name),l.a.createElement("h4",null,this.state.announce.formattedAddress),l.a.createElement("p",null,this.state.announce.email),l.a.createElement("p",null,this.state.announce.description),l.a.createElement("p",null,this.state.announce.pet_type),l.a.createElement("p",null,this.state.announce.comments))):l.a.createElement("div",null,"Looking for your announcement..")}}]),n}(a.Component)),ae=n(22),le=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={search:"",results:[],isLoading:!1},a.handleSearchChange=a.handleSearchChange.bind(Object(ae.a)(a)),a}return Object(o.a)(n,[{key:"handleSearchChange",value:function(e){var t=this;this.setState({search:e.target.value,isLoading:!0}),clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){t.performSearch()}),1e3)}},{key:"performSearch",value:function(){var e=this;""!==this.state.search?p.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(this.state.search,".json?access_token=").concat("pk.eyJ1IjoiaW50YW5wIiwiYSI6ImNranNvaXJmcTgxaTUyeWxnaGVpMHM1NHAifQ.oRrO6PATUG1aGeHmE8_n7Q")).then((function(t){e.setState({results:t.data.features,isLoading:!1})})):this.setState({results:[],isLoading:!1})}},{key:"handleAnnounceClicked",value:function(e){this.setState({search:e.place_name,results:[]}),this.props.onSelect(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.results,a=t.isLoading;return l.a.createElement("div",{className:"AutocompletePlace"},l.a.createElement("input",{className:"input",type:"text",value:this.props.defaultValue||this.state.search,onChange:this.handleSearchChange,placeholder:"Type an address"}),l.a.createElement("ul",{className:"AutocompletePlace-results"},n.map((function(t){return l.a.createElement("li",{key:t.id,className:"AutocompletePlace-announces",onClick:function(){return e.handleAnnounceClicked(t)}},t.place_name)})),a&&l.a.createElement("li",{className:"AutocompletePlace-announces"},"Loading...")))}}]),n}(a.Component),re=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:"",name:"",location:{coordinates:[]},email:"",image:"",description:"",pet_type:"",status:"",comments:""},e.imageRef=l.a.createRef(),e.handleChange=function(t){var n=t.target.value,a=t.target.name;e.setState(Object(G.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault(),console.log(e.state);var n=new FormData;for(var a in e.state)n.append(a,e.state[a]);n.append("image",e.imageRef.current.files[0]),j(n,{title:e.state.title,name:e.state.name,location:e.state.location,email:e.state.email,image:e.state.image,description:e.state.description,pet_type:e.state.pet_type,status:e.state.status,comments:e.state.comments}).then((function(t){e.props.history.push("/profile")}))},e.handlePlace=function(t){var n=t.geometry;e.setState({location:n,formattedAddress:t.place_name})},e}return Object(o.a)(n,[{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this.handleSubmit,ref:this.formRef},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"title"},"Title"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.title,id:"title",name:"title",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"name"},"Name"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.name,id:"name",name:"name",type:"text"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"location"},"Address"),l.a.createElement(le,{onSelect:this.handlePlace})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"email"},"E-mail"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.email,id:"email",name:"email",type:"text"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"status"},"Status"),l.a.createElement("select",{name:"status",id:"status",onChange:this.handleChange,value:this.state.status},l.a.createElement("option",{value:"",disabled:!0},"Select a status"),l.a.createElement("option",{value:"Missing"},"Missing"),l.a.createElement("option",{value:"Found"},"Found"))),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"description"},"Description"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.description,id:"description",name:"description",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"image"},"Image"),l.a.createElement("input",{ref:this.imageRef,onChange:this.handleChange,value:this.state.image,id:"image",name:"image",type:"file"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"pet_type"},"Pet type"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.pet_type,id:"pet_type",name:"pet_type",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"comments"},"Comments"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.comments,id:"comments",name:"comments",type:"text"})),l.a.createElement("button",null,"Submit !"))}}]),n}(a.Component);re.contextType=k;var ce=Object(F.g)(re),ie=function(e){return l.a.createElement("div",null,l.a.createElement(ce,null))};function se(e,t,n){if(!t||"object"!==typeof t||t instanceof Date||t instanceof File){var a=null==t?"":t;e.append(n,a)}else Object.keys(t).forEach((function(a){se(e,t[a],n?"".concat(n,"[").concat(a,"]"):a)}))}var oe=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e,a;Object(s.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(a=t.call.apply(t,[this].concat(c))).state=(e={title:"",name:"",location:"",email:"",description:"",image:""},Object(G.a)(e,"location",{coordinates:[]}),Object(G.a)(e,"status",""),Object(G.a)(e,"pet_type",""),Object(G.a)(e,"comments",""),e),a.imageRef=l.a.createRef(),a.handleChange=function(e){var t=e.target.value,n=e.target.name;a.setState(Object(G.a)({},n,t))},a.handleSubmit=function(e){e.preventDefault();var t=new FormData,n=a.state;n.httpResponse;se(t,Object(z.a)(n,["httpResponse"])),t.append("image",a.imageRef.current.files[0]);var l=a.props.match.params.id;O(l,t).then((function(e){a.props.history.push("/profile"),a.setState({httpResponse:{status:"success",message:"Item successfully added."}}),a.timeoutId=setTimeout((function(){a.setState({httpResponse:null})}),1e3)})).catch((function(e){a.setState({httpResponse:{status:"failure",message:"An error occured, try again later."}}),a.timeoutId=setTimeout((function(){a.setState({httpResponse:null})}),1e3)}))},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;C(t).then((function(t){console.log(t),e.setState({announce:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this.handleSubmit,ref:this.formRef},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"title"},"Title"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.title,id:"title",name:"title",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"name"},"Name"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.name,id:"name",name:"name",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"location"},"Location"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.location.coordinates,id:"location",name:"location",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"email"},"E-mail"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.email,id:"email",name:"email",type:"text"}),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"status"},"Status"),l.a.createElement("select",{name:"status",id:"status",onChange:this.handleChange,value:this.state.status},l.a.createElement("option",{value:"",disabled:!0},"Select a status"),l.a.createElement("option",{value:"Missing"},"Missing"),l.a.createElement("option",{value:"Found"},"Found")))),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"description"},"Description"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.description,id:"description",name:"description",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"image"},"Image"),l.a.createElement("input",{ref:this.imageRef,onChange:this.handleChange,value:this.state.image,id:"image",name:"image",type:"file"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"pet_type"},"Pet type"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.pet_type,id:"pet_type",name:"pet_type",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"comments"},"Comments"),l.a.createElement("input",{onChange:this.handleChange,value:this.state.comments,id:"comments",name:"comments",type:"text"})),l.a.createElement("button",null,"Submit !"))}}]),n}(a.Component);oe.contextType=k;var ue=oe,me=n(33),he=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:{username:"",password:"",profilImg:"",phone_number:0}},e.imageRef=l.a.createRef(),e.handleChange=function(t){var n=t.target.name,a=t.target.value;e.setState({user:Object(me.a)(Object(me.a)({},e.state.user),{},Object(G.a)({},n,a))})},e.isValidInput=function(t){return""!==e.state.user[t]},e.checkError=function(){for(var t in e.state.user)if(""===e.state[t])return!0;return!1},e.handleSubmit=function(t){t.preventDefault();var n=new FormData;se(n,Object.assign({},e.state)),n.append("profileImg",e.imageRef.current.files[0]),S(n).then((function(t){e.props.history.push("/profile"),e.setState({httpResponse:{status:"success",message:"Profile successfully updated."}}),e.context.setUser(t),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"Something bad happened while updating your profile, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;x(t).then((function(t){e.setState({user:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"missing"},l.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},l.a.createElement("h1",{className:"header"},"Edit profile"),l.a.createElement("img",{style:{width:100,height:100},src:this.state.user.profileImg,alt:"animal"}),l.a.createElement("label",{className:"label",htmlFor:"image"}),l.a.createElement("input",{ref:this.imageRef,onChange:this.handleChange,id:"profilImg",name:"profilImg",type:"file"}),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"username"},"Username"),l.a.createElement("input",{className:"input",id:"username",type:"text",name:"username",onChange:this.handleChange,value:this.state.user.username}),!this.isValidInput("username")&&l.a.createElement("p",{className:"input-error"},"Invalid input")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),l.a.createElement("input",{className:"input",id:"password",type:"text",name:"password",onChange:this.handleChange,value:this.state.user.password||""}),!this.isValidInput("password")&&l.a.createElement("p",{className:"input-error"},"Invalid input")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label",htmlFor:"phoneNumber"},"Phone number"),l.a.createElement("input",{className:"input",id:"phoneNumber",type:"text",name:"phoneNumber",onChange:this.handleChange,value:this.state.user.phoneNumber}),!this.isValidInput("phoneNumber")&&l.a.createElement("p",{className:"input-error"},"Invalid input")),l.a.createElement("button",null,"Save")))}}]),n}(a.Component);he.contextType=k;var pe=he;var de=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(_,null),l.a.createElement(F.d,null,l.a.createElement(F.b,{exact:!0,path:"/",component:U}),l.a.createElement(F.b,{exact:!0,path:"/missing",component:Z}),l.a.createElement(F.b,{exact:!0,path:"/create",component:ie}),l.a.createElement(F.b,{exact:!0,path:"/missing/:id",component:te}),l.a.createElement(F.b,{exact:!0,path:"/found/:id",component:ne}),l.a.createElement(F.b,{exact:!0,path:"/found",component:$}),l.a.createElement(F.b,{exact:!0,path:"/signin",component:J}),l.a.createElement(F.b,{exact:!0,path:"/signup",component:Q}),l.a.createElement(B,{exact:!0,path:"/profile",component:K}),l.a.createElement(B,{exact:!0,path:"/profile/:id/edit",component:ue}),l.a.createElement(B,{exact:!0,path:"/profile/settings",component:pe})),l.a.createElement(ee,null))};n(104),n(105);c.a.render(l.a.createElement(i.a,null,l.a.createElement(A,null,l.a.createElement(de,null))),document.getElementById("root"))},53:function(e,t,n){e.exports=n(106)},75:function(e,t,n){}},[[53,1,2]]]);
//# sourceMappingURL=main.42ce6212.chunk.js.map